<html>
  <head>
    <title>開発日記 2023-11-28 -- SAFE HAVN STUDIO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <meta property="og:title" content="開発日記 2023-11-28" />
    <meta
      property="og:description"
      content="今週の開発日記です。最近はCyberpunk 2077をやり直しています。"
    />
    <meta property="og:image" content="https://safehavn.dev/ogp.png" />
    <meta name="twitter:card" content="summary" />
  </head>
  <body>
    <div class="container">
      <header>
        <ul class="nav-list-left">
          <li class="nav-list-item">
            <a href="/" class="brand-link">SAFE HAVN STUDIO</a>
          </li>
        </ul>
        <!-- <ul class="nav-list-right">
          <li class="nav-list-item">
            <a href="../index.html">EN</a>
          </li>
          <li class="nav-list-item selected">JA</li>
        </ul> -->
      </header>
      <div class="main">
        <article>
          <h1 id="-2023-11-28">開発日記 2023-11-28</h1>
          <p>
            今週の開発日記です。最近はCyberpunk 2077をやり直しています。Phantom
            Libertyが出たついでに、最初から2周目でやり直そう......と思って積んでたものです。記憶が薄れたのか、あるいは新しいコンテンツが追加されたのか、ありとあらゆるミッションが面白いです。そして、グラフィックが綺麗。いつまでも見ていられそう。
          </p>
          <figure>
            <img src="lb_inside.webp" />
          </figure>
          <p>
            やっぱりリジーズ・バーが好きです。ピンクのネオンが綺麗。あと、外観もすごく可愛い。凶器持ってる女の子、本当に好き。ほんとに、こういう場所が現実にあったら......
          </p>
          <figure>
            <img src="lb_entrance.webp" />
            <figcaption>かわいい</figcaption>
          </figure>
          <p>
            どこかにはありそう。トーキョーだし。でも、入る勇気がありません。だから家に引きこもってゲームをしています。あ、あと、それ以外の時間では、自分でゲームを、つ、作ったり、......
          </p>
          <h2 id="-">黙々と開発中</h2>
          <p>
            今週はかなり順調に作業できました。ようやくゲームシステムとプロットが決まったので、そのプロットをもとにシナリオを書き起こしたり、ちょっとした分岐機能を実装したり。
          </p>
          <p>
            例によってkohの全面支援を受けながら、初めてイケメン系の立ち絵を描いたりもしました。めちゃくちゃリテイクしました。自分で自分に。たぶん、今後も何回かリテイクが入り、泣きながら描き直すことになります。
          </p>
          <figure>
            <img src="ss.png" />
            <figcaption>
              UIも少しずつ改善しています (huge thx to
              <a href="https://twitter.com/k_maztani">@maztani</a>])
            </figcaption>
          </figure>
          <p>
            分岐機能について。SAEKOが使っている<a
              href="https://ebitengine.org/ja/"
              >Ebitengine</a
            >は超ミニマルなゲームエンジンなので、Ren&#39;Pyのrpyファイルみたいな、シナリオ用の組み込みファイルのようなものが全くありません。スクリプトの文法を考えるのも、その実装もすべて自分で行う必要があります。構文木とか、文脈自由文法とか、そういうワードは全て放り投げ、SAEKOでは行によって全然長さが違う、自由すぎるフォーマットのCSV（？）に独自のスクリプトを定義して使っています。
          </p>
          <p>
            できるだけ書きやすい文法にしたい気持ちはあるのですが、書きやすさと実装の易しさはかなり両立が難しいです。両者のバランスでいつも悩みますが、最終的には実装の易しい方向に倒れます。１行や１列記述が増えるのは、初めて書く１回だけ苦しめばいいので楽ですが、難しい文法を実装してメンテが大変になれば、将来に渡って悩まされ続けることになるからです。なんとなく、Goの思想に近いような気もします。
          </p>
          <p>
            例えば、if文はこんな感じです。if,else,endに共通のIDを割り振る必要があります。どう考えても、IDを振らないで済むほうが書きやすいのですが、そうするとネストとかスタックとか難しいあれこれを考える必要があります。それでは実装が大変なので、スクリプトを書くライター（自分）に面倒を押し付けました。
          </p>
          <figure>
            <img src="ugly.png" />
          </figure>
          <p>
            ライターとしては、スクリプトの文法が増えても特に問題ありませんでした。中身の文章自体を推敲する時間が圧倒的に長く、スクリプトの構文が多少増えたところで誤差みたいなものだからです。
          </p>
          <p>
            こういう日記のような文章でも、ゲームのスクリプトでも、自分は最初に書いた文章がそのまま採用できるということが少ないです。最後まで書き終えたあとに読み返し、大抵は何もかもが気に入らず、ほとんど原型が残らないくらいまでに修正を入れます。特に、ゲームのスクリプトはgitで管理しているので、書き直したときの差分が分かります。もーすごいです。
          </p>
          <p>
            今週はとりあえず、製品版の初日（最初の30分くらい）のシナリオを書き終えることができました。僕のライティングはここからが長く、シナリオ以外のグラフィックとかプログラムを実装しながら、何度も執拗に文章を書き直すことになります。そして、どこかで力尽きます。そしたら文章がFIXになり、どれだけ後悔しても遅いのですが、そもそも飽きるほど同じ文章を読んだせいで欠点があってももう気づけません。好評発売中！
          </p>
          <p><br /></p>
          <p>
            限られたボリュームでいいから、ゲームのプレイを一通り体験できるものをバーティカルスライスといい、バーティカルスライスが遊べるビルドのことをα版と呼ぶらしいです。当面は、このα版の完成を目指して開発を進めていくことになります。地味な作業になりそうで、日記に書けることがあるか心配です。
          </p>
          <p>
            もし何も書けることがなかったら、ナイトシティのおすすめの場所でも書いていこうと思います。
          </p>
          <p><br /></p>
          <p>
            余談：この記事はスティーブン・キングの<a
              href="https://www.amazon.co.jp/dp/B0B2P79DK2"
              >書くことについて</a
            >というエッセイを読んだ直後に書きました。影響を受けまくりました。簡潔な文章になってたらいいな！
          </p>
        </article>
      </div>
    </div>
    <footer>
      <div>(C) SAFE HAVN STUDIO - email:</div>
      <address class="flex-grow-1">contact@safehavn.dev</address>
      <div><a href="/" class="footer-right">TOP</a></div>
    </footer>
  </body>
</html>
