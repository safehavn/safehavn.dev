<html>
  <head>
    <meta charset="utf-8">
    <title>開発日記 2023-11-29 -- SAFE HAVN STUDIO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <meta property="og:title" content="開発日記 2023-11-29" />
    <meta
      property="og:description"
      content="今週の開発日記です。最近はCyberpunk 2077をやり直しています。"
    />
    <meta property="og:image" content="https://safehavn.dev/ogp.png" />
    <meta name="twitter:card" content="summary" />
  </head>
  <body>
    <div class="container">
      <header>
        <ul class="nav-list-left">
          <li class="nav-list-item">
            <a href="/" class="brand-link">SAFE HAVN STUDIO</a>
          </li>
        </ul>
        <!-- <ul class="nav-list-right">
          <li class="nav-list-item">
            <a href="../index.html">EN</a>
          </li>
          <li class="nav-list-item selected">JA</li>
        </ul> -->
      </header>
      <div class="main">
        <article>
          <h1 id="-2023-11-29">開発日記 2023-11-29</h1>
          <p>
            今週の開発日記です。最近はCyberpunk 2077をやり直しています。Phantom
            Libertyが出たついでに、最初からやり直そうと思って積んでたものです。記憶が薄れたおかげで、あらゆるミッションを面白く感じます。グラフィックも綺麗で、いつまでも見ていられそう。
          </p>
          <figure>
            <img src="lb_inside.webp" />
          </figure>
          <p>
            やはりリジーズ・バーが好きです。ピンクのネオンが綺麗で、外観も可愛い。凶器持ってる女の子、本当に好き。こういう場所が、現実にもあったらいいなと思います。
          </p>
          <figure>
            <img src="lb_entrance.webp" />
            <figcaption>かわいい</figcaption>
          </figure>
          <p>
            まあ、あっても入る勇気がないですね。だから、家に引きこもってゲームをしています。あと、それ以外の時間では、自分でゲームを、つ、作ったり、......
          </p>
          <h2 id="-">黙々と開発中</h2>
          <p>
            今週は順調に作業できました。先週までにゲームシステムとプロットが決まったので、そのプロットをもとにシナリオを書いたり、簡単な分岐を実装したり。
          </p>
          <p>
            kohの全面支援を受けながら、初めてイケメン系の立ち絵を描いたりもしました。めちゃくちゃリテイクしました。自分で自分に。目が育つにつれ、今後も何回か描き直すことになると思います。
          </p>
          <figure>
            <img src="ss.png" />
            <figcaption>
              UIも、少しずつ改善中 (huge thx to
              <a href="https://twitter.com/k_maztani">@maztani</a>])
            </figcaption>
          </figure>
          <p>
            分岐について。SAEKOが使っている<a
              href="https://ebitengine.org/ja/"
              >Ebitengine</a
            >はミニマルなライブラリなので、Ren&#39;Pyのrpyファイルのように、シナリオ用の外部ファイルといったものがありません。スクリプトの文法を考えるのも、その実装もすべて自分で行う必要があります。構文木や文脈自由文法といった、高級な概念は一旦忘れましょう。SAEKOでは、行によって長さが全く異なる、自由すぎるフォーマットのCSV（？）をスクリプトとして使っています。
          </p>
          <p>
            書きやすい文法にしたい気持ちはあるのですが、実装の易しさとの両立は難しいです。両者のバランスでいつも悩みますが、いつも実装の易しい方向に倒れます。１行や１列記述が増えるのは、初めて書く１回だけ苦しめばいいですが、難しい文法を実装してしまえば、将来に渡ってその複雑さに悩まされ続けることになるからです。なんとなく、Goの思想に近いような気もします。
          </p>
          <p>
            例えば、if文はこんな感じです。if,else,endに共通のIDを割り振る必要があります。面倒ですが、こういったIDが存在しないと、ネストやスタックといった難しい概念を考える必要が出てきます。ここでは、実装の簡単さを優先することにしました。
          </p>
          <figure>
            <img src="ugly.png" />
          </figure>
          <p>
            実際、書く側の不便はそれほど大きくありません。シナリオを書くときは、ほとんどの時間が一度書いた文章の推敲にあてられます。いっかい書くだけで済むスクリプトの構文が増えても、さほど影響はありません。
          </p>
          <p>
            自分の場合、こういう日記のような文章でも、ゲームのスクリプトでも、最初に書いた文章のほとんどが完成まで生き延びられません。最後まで書き終えたあとに最初から読み返すと、大抵は何もかもが気に入らず、ほとんどは原型が残らないくらいまでに修正されます。特に、ゲームのスクリプトはgitで管理しているので、書き直したときの差分が分かります。もーすごいです。
          </p>
          <p>
            今週は、製品版の初日（最初の30分くらい）のシナリオを書き終えることができました。僕のライティングはここからが長く、シナリオ以外のグラフィックとかプログラムを実装しながら、何度も執拗に文章を書き直すことになります。そして、どこかで力尽きます。そしたら文章がFIXになり、どれだけ後悔しても遅いのですが、そもそも飽きるほど同じ文章を読んだせいでもうその欠点にも気づけません。好評発売中！
          </p>
          <p><br /></p>
          <p>
            限られたボリュームで、ゲームのプレイを一通り体験できるものをバーティカルスライスといい、バーティカルスライスが遊べるビルドのことをα版と呼ぶらしいです。当面は、このα版の完成を目指して開発を進めていきます。地味な作業になりそう。日記に書けることがあるか心配です。
          </p>
          <p>
            もし何も書けることがなかったら、ナイトシティのおすすめの場所でも書いていこうと思います。
          </p>
          <p><br /></p>
          <p>
            余談：この記事はスティーブン・キングの<a
              href="https://www.amazon.co.jp/dp/B0B2P79DK2"
              >書くことについて</a
            >というエッセイを読んだ直後に書きました。影響を受けまくりました。文章も良い感じになってたらいいな！
          </p>
        </article>
      </div>
    </div>
    <footer>
      <div>(C) SAFE HAVN STUDIO - email:</div>
      <address class="flex-grow-1">contact@safehavn.dev</address>
      <div><a href="/" class="footer-right">TOP</a></div>
    </footer>
  </body>
</html>
